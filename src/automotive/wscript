# -*- Mode: python; py-indent-offset: 4; indent-tabs-mode: nil; coding: utf-8; -*-

# def options(opt):
#     pass

# def configure(conf):
#     conf.check_nonfatal(header_name='stdint.h', define_name='HAVE_STDINT_H')

def configure(conf):
    conf.env.append_value("CPPFLAGS", "-fPIC")
    conf.env.append_value('INCLUDES', ['/usr/local/include'])
    conf.env.append_value('LIBPATH', ["/usr/local/lib"])

def build(bld):
    module = bld.create_ns3_module('automotive', ['core','fd-net-device','wifi', 'applications', 'mobility','internet', 'config-store','stats', 'traci'])

    module.source = [
        'model/v2i-CAM-sender.cc',
        'model/v2i-DENM-sender.cc',
        'model/appClient.cc',
        'model/appServer.cc',
        'helper/v2i-cam-sender-helper.cc',
        'helper/v2i-denm-sender-helper.cc',
        'helper/appClient-helper.cc',
        'helper/appServer-helper.cc',

        'model/asn1/AccelerationConfidence.c',
        'model/asn1/AccelerationControl.c',
        'model/asn1/AccidentSubCauseCode.c',
        'model/asn1/ActionID.c',
        'model/asn1/AdverseWeatherCondition-AdhesionSubCauseCode.c',
        'model/asn1/AdverseWeatherCondition-ExtremeWeatherConditionSubCauseCode.c',
        'model/asn1/AdverseWeatherCondition-PrecipitationSubCauseCode.c',
        'model/asn1/AdverseWeatherCondition-VisibilitySubCauseCode.c',
        'model/asn1/AlacarteContainer.c',
        'model/asn1/Altitude.c',
        'model/asn1/AltitudeConfidence.c',
        'model/asn1/AltitudeValue.c',
        'model/asn1/BIT_STRING.c',
        'model/asn1/BOOLEAN.c',
        'model/asn1/BasicContainer.c',
        'model/asn1/BasicVehicleContainerHighFrequency.c',
        'model/asn1/BasicVehicleContainerLowFrequency.c',
        'model/asn1/CAM.c',
        'model/asn1/CamParameters.c',
        'model/asn1/CauseCode.c',
        'model/asn1/CauseCodeType.c',
        'model/asn1/CenDsrcTollingZone.c',
        'model/asn1/CenDsrcTollingZoneID.c',
        'model/asn1/ClosedLanes.c',
        'model/asn1/CollisionRiskSubCauseCode.c',
        'model/asn1/CoopAwareness.c',
        'model/asn1/Curvature.c',
        'model/asn1/CurvatureCalculationMode.c',
        'model/asn1/CurvatureConfidence.c',
        'model/asn1/CurvatureValue.c',
        'model/asn1/DENM.c',
        'model/asn1/DangerousEndOfQueueSubCauseCode.c',
        'model/asn1/DangerousGoodsBasic.c',
        'model/asn1/DangerousGoodsContainer.c',
        'model/asn1/DangerousGoodsExtended.c',
        'model/asn1/DangerousSituationSubCauseCode.c',
        'model/asn1/DecentralizedEnvironmentalNotificationMessage.c',
        'model/asn1/DeltaAltitude.c',
        'model/asn1/DeltaLatitude.c',
        'model/asn1/DeltaLongitude.c',
        'model/asn1/DeltaReferencePosition.c',
        'model/asn1/DriveDirection.c',
        'model/asn1/DrivingLaneStatus.c',
        'model/asn1/EmbarkationStatus.c',
        'model/asn1/EmergencyContainer.c',
        'model/asn1/EmergencyPriority.c',
        'model/asn1/EmergencyVehicleApproachingSubCauseCode.c',
        'model/asn1/EnergyStorageType.c',
        'model/asn1/EventHistory.c',
        'model/asn1/EventPoint.c',
        'model/asn1/ExteriorLights.c',
        'model/asn1/GenerationDeltaTime.c',
        'model/asn1/HardShoulderStatus.c',
        'model/asn1/HazardousLocation-AnimalOnTheRoadSubCauseCode.c',
        'model/asn1/HazardousLocation-DangerousCurveSubCauseCode.c',
        'model/asn1/HazardousLocation-ObstacleOnTheRoadSubCauseCode.c',
        'model/asn1/HazardousLocation-SurfaceConditionSubCauseCode.c',
        'model/asn1/Heading.c',
        'model/asn1/HeadingConfidence.c',
        'model/asn1/HeadingValue.c',
        'model/asn1/HeightLonCarr.c',
        'model/asn1/HighFrequencyContainer.c',
        'model/asn1/HumanPresenceOnTheRoadSubCauseCode.c',
        'model/asn1/HumanProblemSubCauseCode.c',
        'model/asn1/IA5String.c',
        'model/asn1/INTEGER.c',
        'model/asn1/ImpactReductionContainer.c',
        'model/asn1/InformationQuality.c',
        'model/asn1/ItineraryPath.c',
        'model/asn1/ItsPduHeader.c',
        'model/asn1/LanePosition.c',
        'model/asn1/LateralAcceleration.c',
        'model/asn1/LateralAccelerationValue.c',
        'model/asn1/Latitude.c',
        'model/asn1/LightBarSirenInUse.c',
        'model/asn1/LocationContainer.c',
        'model/asn1/Longitude.c',
        'model/asn1/LongitudinalAcceleration.c',
        'model/asn1/LongitudinalAccelerationValue.c',
        'model/asn1/LowFrequencyContainer.c',
        'model/asn1/ManagementContainer.c',
        'model/asn1/NativeEnumerated.c',
        'model/asn1/NativeInteger.c',
        'model/asn1/NumberOfOccupants.c',
        'model/asn1/OCTET_STRING.c',
        'model/asn1/PathDeltaTime.c',
        'model/asn1/PathHistory.c',
        'model/asn1/PathPoint.c',
        'model/asn1/PerformanceClass.c',
        'model/asn1/PosCentMass.c',
        'model/asn1/PosConfidenceEllipse.c',
        'model/asn1/PosFrontAx.c',
        'model/asn1/PosLonCarr.c',
        'model/asn1/PosPillar.c',
        'model/asn1/PositionOfOccupants.c',
        'model/asn1/PositionOfPillars.c',
        'model/asn1/PositioningSolutionType.c',
        'model/asn1/PostCrashSubCauseCode.c',
        'model/asn1/ProtectedCommunicationZone.c',
        'model/asn1/ProtectedCommunicationZonesRSU.c',
        'model/asn1/ProtectedZoneID.c',
        'model/asn1/ProtectedZoneRadius.c',
        'model/asn1/ProtectedZoneType.c',
        'model/asn1/PtActivation.c',
        'model/asn1/PtActivationData.c',
        'model/asn1/PtActivationType.c',
        'model/asn1/PublicTransportContainer.c',
        'model/asn1/RSUContainerHighFrequency.c',
        'model/asn1/ReferenceDenms.c',
        'model/asn1/ReferencePosition.c',
        'model/asn1/RelevanceDistance.c',
        'model/asn1/RelevanceTrafficDirection.c',
        'model/asn1/RequestResponseIndication.c',
        'model/asn1/RescueAndRecoveryWorkInProgressSubCauseCode.c',
        'model/asn1/RescueContainer.c',
        'model/asn1/RestrictedTypes.c',
        'model/asn1/RoadType.c',
        'model/asn1/RoadWorksContainerBasic.c',
        'model/asn1/RoadWorksContainerExtended.c',
        'model/asn1/RoadworksSubCauseCode.c',
        'model/asn1/SafetyCarContainer.c',
        'model/asn1/SemiAxisLength.c',
        'model/asn1/SequenceNumber.c',
        'model/asn1/SignalViolationSubCauseCode.c',
        'model/asn1/SituationContainer.c',
        'model/asn1/SlowVehicleSubCauseCode.c',
        'model/asn1/SpecialTransportContainer.c',
        'model/asn1/SpecialTransportType.c',
        'model/asn1/SpecialVehicleContainer.c',
        'model/asn1/Speed.c',
        'model/asn1/SpeedConfidence.c',
        'model/asn1/SpeedLimit.c',
        'model/asn1/SpeedValue.c',
        'model/asn1/StationID.c',
        'model/asn1/StationType.c',
        'model/asn1/StationarySince.c',
        'model/asn1/StationaryVehicleContainer.c',
        'model/asn1/StationaryVehicleSubCauseCode.c',
        'model/asn1/SteeringWheelAngle.c',
        'model/asn1/SteeringWheelAngleConfidence.c',
        'model/asn1/SteeringWheelAngleValue.c',
        'model/asn1/SubCauseCodeType.c',
        'model/asn1/Temperature.c',
        'model/asn1/Termination.c',
        'model/asn1/TimestampIts.c',
        'model/asn1/Traces.c',
        'model/asn1/TrafficConditionSubCauseCode.c',
        'model/asn1/TrafficRule.c',
        'model/asn1/TransmissionInterval.c',
        'model/asn1/TurningRadius.c',
        'model/asn1/UTF8String.c',
        'model/asn1/VDS.c',
        'model/asn1/ValidityDuration.c',
        'model/asn1/VehicleBreakdownSubCauseCode.c',
        'model/asn1/VehicleIdentification.c',
        'model/asn1/VehicleLength.c',
        'model/asn1/VehicleLengthConfidenceIndication.c',
        'model/asn1/VehicleLengthValue.c',
        'model/asn1/VehicleMass.c',
        'model/asn1/VehicleRole.c',
        'model/asn1/VehicleWidth.c',
        'model/asn1/VerticalAcceleration.c',
        'model/asn1/VerticalAccelerationValue.c',
        'model/asn1/WMInumber.c',
        'model/asn1/WheelBaseVehicle.c',
        'model/asn1/WrongWayDrivingSubCauseCode.c',
        'model/asn1/YawRate.c',
        'model/asn1/YawRateConfidence.c',
        'model/asn1/YawRateValue.c',
        'model/asn1/asn_SEQUENCE_OF.c',
        'model/asn1/asn_SET_OF.c',
        'model/asn1/asn_codecs_prim.c',
        'model/asn1/ber_decoder.c',
        'model/asn1/ber_tlv_length.c',
        'model/asn1/ber_tlv_tag.c',
        'model/asn1/constr_CHOICE.c',
        'model/asn1/constr_SEQUENCE.c',
        'model/asn1/constr_SEQUENCE_OF.c',
        'model/asn1/constr_SET_OF.c',
        'model/asn1/constr_TYPE.c',
        'model/asn1/constraints.c',
        'model/asn1/der_encoder.c',
        'model/asn1/per_decoder.c',
        'model/asn1/per_encoder.c',
        'model/asn1/per_opentype.c',
        'model/asn1/per_support.c',
        'model/asn1/xer_decoder.c',
        'model/asn1/xer_encoder.c',
        'model/asn1/xer_support.c',
       
        ]

    module_test = bld.create_ns3_module_test_library('automotive')
    module_test.source = [
        ]

    headers = bld(features='ns3header')
    headers.module = 'automotive'
    headers.source = [
        'model/v2i-CAM-sender.h',
        'model/v2i-DENM-sender.h',
        'model/appClient.h',
        'model/appServer.h',
        'helper/v2i-cam-sender-helper.h',
        'helper/v2i-denm-sender-helper.h',
        'helper/appClient-helper.h',
        'helper/appServer-helper.h',


        'model/asn1/AccelerationConfidence.h',
        'model/asn1/AccelerationControl.h',
        'model/asn1/AccidentSubCauseCode.h',
        'model/asn1/ActionID.h',
        'model/asn1/AdverseWeatherCondition-AdhesionSubCauseCode.h',
        'model/asn1/AdverseWeatherCondition-ExtremeWeatherConditionSubCauseCode.h',
        'model/asn1/AdverseWeatherCondition-PrecipitationSubCauseCode.h',
        'model/asn1/AdverseWeatherCondition-VisibilitySubCauseCode.h',
        'model/asn1/AlacarteContainer.h',
        'model/asn1/Altitude.h',
        'model/asn1/AltitudeConfidence.h',
        'model/asn1/AltitudeValue.h',
        'model/asn1/BIT_STRING.h',
        'model/asn1/BOOLEAN.h',
        'model/asn1/BasicContainer.h',
        'model/asn1/BasicVehicleContainerHighFrequency.h',
        'model/asn1/BasicVehicleContainerLowFrequency.h',
        'model/asn1/CAM.h',
        'model/asn1/CamParameters.h',
        'model/asn1/CauseCode.h',
        'model/asn1/CauseCodeType.h',
        'model/asn1/CenDsrcTollingZone.h',
        'model/asn1/CenDsrcTollingZoneID.h',
        'model/asn1/ClosedLanes.h',
        'model/asn1/CollisionRiskSubCauseCode.h',
        'model/asn1/CoopAwareness.h',
        'model/asn1/Curvature.h',
        'model/asn1/CurvatureCalculationMode.h',
        'model/asn1/CurvatureConfidence.h',
        'model/asn1/CurvatureValue.h',
        'model/asn1/DENM.h',
        'model/asn1/DangerousEndOfQueueSubCauseCode.h',
        'model/asn1/DangerousGoodsBasic.h',
        'model/asn1/DangerousGoodsContainer.h',
        'model/asn1/DangerousGoodsExtended.h',
        'model/asn1/DangerousSituationSubCauseCode.h',
        'model/asn1/DecentralizedEnvironmentalNotificationMessage.h',
        'model/asn1/DeltaAltitude.h',
        'model/asn1/DeltaLatitude.h',
        'model/asn1/DeltaLongitude.h',
        'model/asn1/DeltaReferencePosition.h',
        'model/asn1/DriveDirection.h',
        'model/asn1/DrivingLaneStatus.h',
        'model/asn1/EmbarkationStatus.h',
        'model/asn1/EmergencyContainer.h',
        'model/asn1/EmergencyPriority.h',
        'model/asn1/EmergencyVehicleApproachingSubCauseCode.h',
        'model/asn1/EnergyStorageType.h',
        'model/asn1/EventHistory.h',
        'model/asn1/EventPoint.h',
        'model/asn1/ExteriorLights.h',
        'model/asn1/GenerationDeltaTime.h',
        'model/asn1/HardShoulderStatus.h',
        'model/asn1/HazardousLocation-AnimalOnTheRoadSubCauseCode.h',
        'model/asn1/HazardousLocation-DangerousCurveSubCauseCode.h',
        'model/asn1/HazardousLocation-ObstacleOnTheRoadSubCauseCode.h',
        'model/asn1/HazardousLocation-SurfaceConditionSubCauseCode.h',
        'model/asn1/Heading.h',
        'model/asn1/HeadingConfidence.h',
        'model/asn1/HeadingValue.h',
        'model/asn1/HeightLonCarr.h',
        'model/asn1/HighFrequencyContainer.h',
        'model/asn1/HumanPresenceOnTheRoadSubCauseCode.h',
        'model/asn1/HumanProblemSubCauseCode.h',
        'model/asn1/IA5String.h',
        'model/asn1/INTEGER.h',
        'model/asn1/ImpactReductionContainer.h',
        'model/asn1/InformationQuality.h',
        'model/asn1/ItineraryPath.h',
        'model/asn1/ItsPduHeader.h',
        'model/asn1/LanePosition.h',
        'model/asn1/LateralAcceleration.h',
        'model/asn1/LateralAccelerationValue.h',
        'model/asn1/Latitude.h',
        'model/asn1/LightBarSirenInUse.h',
        'model/asn1/LocationContainer.h',
        'model/asn1/Longitude.h',
        'model/asn1/LongitudinalAcceleration.h',
        'model/asn1/LongitudinalAccelerationValue.h',
        'model/asn1/LowFrequencyContainer.h',
        'model/asn1/ManagementContainer.h',
        'model/asn1/NativeEnumerated.h',
        'model/asn1/NativeInteger.h',
        'model/asn1/NumberOfOccupants.h',
        'model/asn1/OCTET_STRING.h',
        'model/asn1/PathDeltaTime.h',
        'model/asn1/PathHistory.h',
        'model/asn1/PathPoint.h',
        'model/asn1/PerformanceClass.h',
        'model/asn1/PosCentMass.h',
        'model/asn1/PosConfidenceEllipse.h',
        'model/asn1/PosFrontAx.h',
        'model/asn1/PosLonCarr.h',
        'model/asn1/PosPillar.h',
        'model/asn1/PositionOfOccupants.h',
        'model/asn1/PositionOfPillars.h',
        'model/asn1/PositioningSolutionType.h',
        'model/asn1/PostCrashSubCauseCode.h',
        'model/asn1/ProtectedCommunicationZone.h',
        'model/asn1/ProtectedCommunicationZonesRSU.h',
        'model/asn1/ProtectedZoneID.h',
        'model/asn1/ProtectedZoneRadius.h',
        'model/asn1/ProtectedZoneType.h',
        'model/asn1/PtActivation.h',
        'model/asn1/PtActivationData.h',
        'model/asn1/PtActivationType.h',
        'model/asn1/PublicTransportContainer.h',
        'model/asn1/RSUContainerHighFrequency.h',
        'model/asn1/ReferenceDenms.h',
        'model/asn1/ReferencePosition.h',
        'model/asn1/RelevanceDistance.h',
        'model/asn1/RelevanceTrafficDirection.h',
        'model/asn1/RequestResponseIndication.h',
        'model/asn1/RescueAndRecoveryWorkInProgressSubCauseCode.h',
        'model/asn1/RescueContainer.h',
        'model/asn1/RestrictedTypes.h',
        'model/asn1/RoadType.h',
        'model/asn1/RoadWorksContainerBasic.h',
        'model/asn1/RoadWorksContainerExtended.h',
        'model/asn1/RoadworksSubCauseCode.h',
        'model/asn1/SafetyCarContainer.h',
        'model/asn1/SemiAxisLength.h',
        'model/asn1/SequenceNumber.h',
        'model/asn1/SignalViolationSubCauseCode.h',
        'model/asn1/SituationContainer.h',
        'model/asn1/SlowVehicleSubCauseCode.h',
        'model/asn1/SpecialTransportContainer.h',
        'model/asn1/SpecialTransportType.h',
        'model/asn1/SpecialVehicleContainer.h',
        'model/asn1/Speed.h',
        'model/asn1/SpeedConfidence.h',
        'model/asn1/SpeedLimit.h',
        'model/asn1/SpeedValue.h',
        'model/asn1/StationID.h',
        'model/asn1/StationType.h',
        'model/asn1/StationarySince.h',
        'model/asn1/StationaryVehicleContainer.h',
        'model/asn1/StationaryVehicleSubCauseCode.h',
        'model/asn1/SteeringWheelAngle.h',
        'model/asn1/SteeringWheelAngleConfidence.h',
        'model/asn1/SteeringWheelAngleValue.h',
        'model/asn1/SubCauseCodeType.h',
        'model/asn1/Temperature.h',
        'model/asn1/Termination.h',
        'model/asn1/TimestampIts.h',
        'model/asn1/Traces.h',
        'model/asn1/TrafficConditionSubCauseCode.h',
        'model/asn1/TrafficRule.h',
        'model/asn1/TransmissionInterval.h',
        'model/asn1/TurningRadius.h',
        'model/asn1/UTF8String.h',
        'model/asn1/VDS.h',
        'model/asn1/ValidityDuration.h',
        'model/asn1/VehicleBreakdownSubCauseCode.h',
        'model/asn1/VehicleIdentification.h',
        'model/asn1/VehicleLength.h',
        'model/asn1/VehicleLengthConfidenceIndication.h',
        'model/asn1/VehicleLengthValue.h',
        'model/asn1/VehicleMass.h',
        'model/asn1/VehicleRole.h',
        'model/asn1/VehicleWidth.h',
        'model/asn1/VerticalAcceleration.h',
        'model/asn1/VerticalAccelerationValue.h',
        'model/asn1/WMInumber.h',
        'model/asn1/WheelBaseVehicle.h',
        'model/asn1/WrongWayDrivingSubCauseCode.h',
        'model/asn1/YawRate.h',
        'model/asn1/YawRateConfidence.h',
        'model/asn1/YawRateValue.h',
        'model/asn1/asn_SEQUENCE_OF.h',
        'model/asn1/asn_SET_OF.h',
        'model/asn1/asn_application.h',
        'model/asn1/asn_codecs.h',
        'model/asn1/asn_codecs_prim.h',
        'model/asn1/asn_internal.h',
        'model/asn1/asn_system.h',
        'model/asn1/ber_decoder.h',
        'model/asn1/ber_tlv_length.h',
        'model/asn1/ber_tlv_tag.h',
        'model/asn1/constr_CHOICE.h',
        'model/asn1/constr_SEQUENCE.h',
        'model/asn1/constr_SEQUENCE_OF.h',
        'model/asn1/constr_SET_OF.h',
        'model/asn1/constr_TYPE.h',
        'model/asn1/constraints.h',
        'model/asn1/der_encoder.h',
        'model/asn1/per_decoder.h',
        'model/asn1/per_encoder.h',
        'model/asn1/per_opentype.h',
        'model/asn1/per_support.h',
        'model/asn1/xer_decoder.h',
        'model/asn1/xer_encoder.h',
        'model/asn1/xer_support.h',

        ]

    if bld.env.ENABLE_EXAMPLES:
        bld.recurse('examples')

    # bld.ns3_python_bindings()

